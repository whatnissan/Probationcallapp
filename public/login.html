<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign In - ProbationCall</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,sans-serif;background:linear-gradient(135deg,#0a0a0f,#1a1a2e);min-height:100vh;display:flex;align-items:center;justify-content:center;color:#fff}
.card{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:20px;padding:40px;width:100%;max-width:400px;text-align:center}
.logo{font-size:2.5rem;margin-bottom:15px}
h1{font-size:1.5rem;margin-bottom:10px}
.subtitle{color:#8892b0;margin-bottom:30px}
.btn{display:flex;align-items:center;justify-content:center;gap:12px;width:100%;padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.05);color:#fff;font-size:1rem;cursor:pointer}
.btn:hover{background:rgba(255,255,255,0.1)}
.btn img{width:20px;height:20px}
.info{color:#555;margin-top:20px;font-size:0.85rem}
.error{color:#ef4444;margin-top:15px}
.back{color:#8892b0;text-decoration:none;display:block;margin-top:20px}
</style>
</head>
<body>
<div class="card">
  <div class="logo">üìû</div>
  <h1>ProbationCall</h1>
  <p class="subtitle">Sign in to manage your automated check-ins</p>
  <button class="btn" onclick="signIn()">
    <img src="https://www.google.com/favicon.ico" alt="">
    Continue with Google
  </button>
  <p class="info">New users get 1 free credit!</p>
  <p class="error" id="error"></p>
  <a href="/" class="back">‚Üê Back to Home</a>
</div>
<script>
var supabase = window.supabase.createClient(
  'https://xvpuqeaowvlkcyywgaaq.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2cHVxZWFvd3Zsa2N5eXdnYWFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyNzc1MjcsImV4cCI6MjA3OTg1MzUyN30.y90odNDSU0zZcVGMK9C39gSFDL9NJcy5E4yBkgcFc8w'
);

// Check if already logged in
supabase.auth.getSession().then(function(result) {
  if (result.data.session) {
    window.location.href = '/dashboard';
  }
});

function signIn() {
  supabase.auth.signInWithOAuth({
    provider: 'google',
    options: {
      redirectTo: window.location.origin + '/dashboard'
    }
  });
}

// Check for error in URL
var params = new URLSearchParams(window.location.search);
if (params.get('error_description')) {
  document.getElementById('error').textContent = params.get('error_description');
}
</script>
</body>
</html>
