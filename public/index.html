<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ProbationCall - Automated Probation Check-In Calls</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,sans-serif;background:#0a0a0f;color:#fff;min-height:100vh}
nav{display:flex;justify-content:space-between;align-items:center;padding:20px 40px;max-width:1200px;margin:0 auto}
.logo{font-size:1.5rem;font-weight:700;color:#00d9ff}
.nav-btn{background:rgba(255,255,255,0.1);border:none;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;font-size:0.95rem}
.nav-btn:hover{background:rgba(255,255,255,0.2)}
.hero{text-align:center;padding:80px 20px;max-width:800px;margin:0 auto}
.hero h1{font-size:3rem;margin-bottom:20px;line-height:1.2}
.hero h1 span{color:#00d9ff}
.hero p{font-size:1.2rem;color:#8892b0;margin-bottom:40px;line-height:1.6}
.cta-btn{background:linear-gradient(135deg,#00d9ff,#0099cc);color:#000;border:none;padding:16px 40px;border-radius:10px;font-size:1.1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:10px}
.cta-btn:hover{opacity:0.9}
.features{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:30px;padding:60px 40px;max-width:1200px;margin:0 auto}
.feature{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:30px;text-align:center}
.feature-icon{font-size:2.5rem;margin-bottom:15px}
.feature h3{color:#00d9ff;margin-bottom:10px}
.feature p{color:#8892b0;font-size:0.95rem;line-height:1.5}
.how-it-works{padding:60px 40px;max-width:1000px;margin:0 auto}
.how-it-works h2{text-align:center;color:#00d9ff;margin-bottom:40px;font-size:2rem}
.steps{display:flex;flex-direction:column;gap:20px}
.step{display:flex;gap:20px;align-items:flex-start;background:rgba(255,255,255,0.03);border-radius:12px;padding:25px}
.step-num{background:#00d9ff;color:#000;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;flex-shrink:0}
.step-content h3{margin-bottom:8px}
.step-content p{color:#8892b0;font-size:0.95rem}
.pricing{padding:60px 40px;max-width:1000px;margin:0 auto;text-align:center}
.pricing h2{color:#00d9ff;margin-bottom:40px;font-size:2rem}
.price-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}
.price-card{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:30px}
.price-card.popular{border-color:#00d9ff;background:rgba(0,217,255,0.05)}
.price-card h3{color:#8892b0;margin-bottom:10px}
.price-card .credits{font-size:2.5rem;font-weight:700;color:#fff}
.price-card .price{color:#00d9ff;font-size:1.3rem;margin:10px 0}
.price-card .save{color:#22c55e;font-size:0.85rem}
.warning-section{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);max-width:800px;margin:40px auto;border-radius:16px;padding:30px}
.warning-section h3{color:#ef4444;margin-bottom:15px}
.warning-section p{color:#ccc;font-size:0.95rem;line-height:1.6}
.sms-terms{background:rgba(0,217,255,0.1);border:1px solid rgba(0,217,255,0.3);max-width:800px;margin:40px auto;border-radius:16px;padding:30px}
.sms-terms h3{color:#00d9ff;margin-bottom:15px}
.sms-terms ul{color:#8892b0;margin-left:20px;line-height:1.8}
footer{text-align:center;padding:40px;color:#666;border-top:1px solid rgba(255,255,255,0.1);margin-top:60px}
footer a{color:#00d9ff;text-decoration:none;margin:0 15px}
.loading-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#0a0a0f;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}
.loading-overlay.hidden{display:none}
.spinner{width:40px;height:40px;border:3px solid #333;border-top-color:#00d9ff;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-text{color:#8892b0;margin-top:15px}
</style>
</head>
<body>

<!-- Loading overlay for OAuth callback -->
<div class="loading-overlay hidden" id="loadingOverlay">
<div class="spinner"></div>
<div class="loading-text">Signing you in...</div>
</div>

<nav>
<div class="logo">üìû ProbationCall</div>
<button class="nav-btn" id="navBtn" onclick="handleAuth()">Sign In</button>
</nav>

<section class="hero">
<h1>Never Miss a <span>Probation Check-In</span> Again</h1>
<div style="background:linear-gradient(135deg,#22c55e,#16a34a);color:#000;padding:8px 16px;border-radius:20px;display:inline-block;font-weight:700;margin:10px 0">üéÅ 5 FREE Credits on Signup!</div>
<p>Automated daily calls to your probation hotline with instant notifications. Know if you need to test before you even wake up.</p>
<button class="cta-btn" onclick="handleAuth()">üéÅ Try Free - 5 Credits! ‚Üí</button>
<p style="color:#8892b0;font-size:0.9rem;margin-top:15px">‚úì No credit card to try &nbsp;‚Ä¢&nbsp; ‚úì Works while you sleep &nbsp;‚Ä¢&nbsp; ‚úì Instant alerts</p>
</section>

<section class="counties" style="text-align:center;padding:40px 20px;max-width:600px;margin:0 auto">
<p style="color:#8892b0;margin-bottom:15px">Currently serving:</p>
<div style="display:flex;justify-content:center;gap:20px;flex-wrap:wrap">
<div style="background:rgba(0,217,255,0.1);border:1px solid rgba(0,217,255,0.3);padding:12px 24px;border-radius:10px">
<span style="font-size:1.5rem">üèõÔ∏è</span>
<div style="color:#fff;font-weight:600">Montgomery County</div>
<div style="color:#8892b0;font-size:0.8rem">PIN-based system</div>
</div>
<div style="background:rgba(0,217,255,0.1);border:1px solid rgba(0,217,255,0.3);padding:12px 24px;border-radius:10px">
<span style="font-size:1.5rem">üé®</span>
<div style="color:#fff;font-weight:600">Fort Bend County</div>
<div style="color:#8892b0;font-size:0.8rem">Color-based system</div>
</div>
</div>
<p style="color:#666;font-size:0.8rem;margin-top:15px">More counties coming soon!</p>
</section>

<section class="features">
<div class="feature">
<div class="feature-icon">üìû</div>
<h3>Automated Calls</h3>
<p>We call the hotline for you every morning and listen to the recorded message.</p>
</div>
<div class="feature">
<div class="feature-icon">üîî</div>
<h3>Instant Alerts</h3>
<p>Get notified immediately via email if you need to report for testing.</p>
</div>
<div class="feature">
<div class="feature-icon">‚è∞</div>
<h3>Scheduled Daily</h3>
<p>Set your preferred time and we handle the rest. Wake up knowing your status.</p>
</div>
<div class="feature">
<div class="feature-icon">üîÑ</div>
<h3>Auto-Retry</h3>
<p>If we can't determine the result, we automatically try again in 5 minutes.</p>
</div>
</section>

<section class="how-it-works">
<h2>How It Works</h2>
<div class="steps">
<div class="step">
<div class="step-num">1</div>
<div class="step-content">
<h3>Sign Up & Add Your Info</h3>
<p>Enter your probation hotline number and 6-digit PIN code.</p>
</div>
</div>
<div class="step">
<div class="step-num">2</div>
<div class="step-content">
<h3>Set Your Schedule</h3>
<p>Choose what time you want us to call (between 6 AM - 3 PM).</p>
</div>
</div>
<div class="step">
<div class="step-num">3</div>
<div class="step-content">
<h3>Get Notified</h3>
<p>Receive an email with your result - no test required or report for testing.</p>
</div>
</div>
</div>
</section>

<section class="pricing">
<h2>Simple Pricing</h2>
<p style="color:#8892b0;margin-bottom:30px">1 credit = 1 automated call</p>
<div class="price-cards">
<div class="price-card">
<h3>Starter</h3>
<div class="credits">30</div>
<div class="price">$9.99</div>
<p style="color:#8892b0;font-size:0.85rem">~1 month</p>
</div>
<div class="price-card popular">
<h3>Standard</h3>
<div class="credits">90</div>
<div class="price">$24.99</div>
<div class="save">Save 17%</div>
<p style="color:#8892b0;font-size:0.85rem">~3 months</p>
</div>
<div class="price-card">
<h3>Value</h3>
<div class="credits">180</div>
<div class="price">$39.99</div>
<div class="save">Save 33%</div>
<p style="color:#8892b0;font-size:0.85rem">~6 months</p>
</div>
</div>
</section>

<section class="warning-section">
<h3>‚ö†Ô∏è Important Disclaimer</h3>
<p>ProbationCall is a convenience tool only and is NOT a substitute for personally calling your probation hotline. Technology can fail - calls may not connect, speech recognition may be inaccurate. You are solely responsible for your probation compliance. Always verify your status through official channels. By using this service, you accept all risks. <a href="/terms.html" style="color:#00d9ff">Read full Terms of Service</a></p>
</section>

<section class="sms-terms">
<h3>üì± SMS Notification Terms</h3>
<ul>
<li><strong>Brand:</strong> ProbationCall</li>
<li><strong>Message Frequency:</strong> Up to 1 message per scheduled call (typically daily)</li>
<li><strong>Message and data rates may apply</strong></li>
<li><strong>Reply STOP</strong> to unsubscribe at any time</li>
<li><strong>Reply HELP</strong> for assistance</li>
<li><strong>Contact:</strong> probationreportingapp@gmail.com</li>
</ul>
</section>

<section class="faq" style="padding:60px 40px;max-width:800px;margin:0 auto">
<h2 style="text-align:center;color:#00d9ff;margin-bottom:40px;font-size:2rem">Frequently Asked Questions</h2>

<div style="display:flex;flex-direction:column;gap:20px">
<div style="background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:20px">
<h3 style="color:#fff;margin-bottom:10px">How does it work?</h3>
<p style="color:#8892b0;line-height:1.6">We call your county's probation hotline at your scheduled time, listen to the recorded message, and send you a notification with the result. You'll know if you need to test before you even get out of bed.</p>
</div>

<div style="background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:20px">
<h3 style="color:#fff;margin-bottom:10px">Is this legal?</h3>
<p style="color:#8892b0;line-height:1.6">Yes! We're simply calling a public phone number on your behalf - the same thing a family member or friend could do. You're still responsible for actually reporting if required.</p>
</div>

<div style="background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:20px">
<h3 style="color:#fff;margin-bottom:10px">What if the call fails?</h3>
<p style="color:#8892b0;line-height:1.6">Our system automatically retries up to 2 times if we can't determine the result. You can also enable notifications for failed calls so you know to check manually.</p>
</div>

<div style="background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:20px">
<h3 style="color:#fff;margin-bottom:10px">Should I rely only on this service?</h3>
<p style="color:#8892b0;line-height:1.6">No - this is a backup tool, not a replacement. Technology can fail. Always have a backup plan and call yourself if anything seems wrong. You are responsible for your probation compliance.</p>
</div>

<div style="background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:20px">
<h3 style="color:#fff;margin-bottom:10px">How much does it cost?</h3>
<p style="color:#8892b0;line-height:1.6">You get 5 free credits to try. After that, credits start at $9.99 for 30 days. One credit = one daily call. Most people on probation spend less than $0.35/day for peace of mind.</p>
</div>
</div>
</section>

<section style="text-align:center;padding:60px 20px;background:rgba(0,217,255,0.05);margin:40px 0">
<h2 style="color:#fff;margin-bottom:15px">Ready to stop stressing about check-ins?</h2>
<p style="color:#8892b0;margin-bottom:25px">Join hundreds of people who wake up knowing their status.</p>
<button class="cta-btn" onclick="handleAuth()">üéÅ Get 5 Free Credits ‚Üí</button>
</section>

<footer>
<p>¬© 2025 ProbationCall. All rights reserved.</p>
<div style="margin-top:15px">
<a href="/terms.html">Terms of Service</a>
<a href="/privacy.html">Privacy Policy</a>
<a href="/sms-consent.html">SMS Consent</a>
</div>
</footer>

<script>
var SUPA_URL = 'https://xvpuqeaowvlkcyywgaaq.supabase.co';
var SUPA_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2cHVxZWFvd3Zsa2N5eXdnYWFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyNzc1MjcsImV4cCI6MjA3OTg1MzUyN30.y90odNDSU0zZcVGMK9C39gSFDL9NJcy5E4yBkgcFc8w';
var supabase = window.supabase.createClient(SUPA_URL, SUPA_KEY);

// Handle OAuth callback if returning from Google
async function handleOAuthCallback() {
  if (window.location.hash && window.location.hash.includes('access_token')) {
    // Show loading
    document.getElementById('loadingOverlay').classList.remove('hidden');
    
    // Wait for session to be established
    var maxAttempts = 20;
    var attempts = 0;
    
    var checkSession = async function() {
      attempts++;
      var result = await supabase.auth.getSession();
      
      if (result.data.session) {
        // Clear the hash and redirect
        window.location.replace('/dashboard');
        return;
      }
      
      if (attempts < maxAttempts) {
        setTimeout(checkSession, 250);
      } else {
        // Failed, hide loading and let user try again
        document.getElementById('loadingOverlay').classList.add('hidden');
        alert('Login failed. Please try again.');
      }
    };
    
    setTimeout(checkSession, 500);
    return true;
  }
  return false;
}

// Check if already logged in
async function checkSession() {
  var result = await supabase.auth.getSession();
  if (result.data.session) {
    document.getElementById('navBtn').textContent = 'Dashboard';
  }
}

// Handle auth button click
async function handleAuth() {
  // Check if already logged in
  var result = await supabase.auth.getSession();
  if (result.data.session) {
    window.location.href = '/dashboard';
    return;
  }
  
  // Not logged in, start OAuth
  document.getElementById('loadingOverlay').classList.remove('hidden');
  
  var authResult = await supabase.auth.signInWithOAuth({
    provider: 'google',
    options: {
      redirectTo: window.location.origin + '/'
    }
  });
  
  if (authResult.error) {
    document.getElementById('loadingOverlay').classList.add('hidden');
    alert('Login failed: ' + authResult.error.message);
  }
}

// Listen for auth changes
supabase.auth.onAuthStateChange(function(event, session) {
  if (event === 'SIGNED_IN' && session) {
    window.location.replace('/dashboard');
  }
});

// Initialize
async function init() {
  // First check for OAuth callback
  var isCallback = await handleOAuthCallback();
  if (!isCallback) {
    // Not a callback, just check if logged in
    await checkSession();
  }
}

init();
</script>
</body>
</html>
